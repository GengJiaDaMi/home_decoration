<form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">

    <!-- order 表-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('User_id')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-user_id" disabled data-rule="required" data-source="user/user/index" data-field="nickname" class="form-control selectpage" name="row[user_id]" type="text" value="{$row.user_id|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Shop_id')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-shop_id" disabled data-rule="required" data-source="shop/index" class="form-control selectpage" name="row[shop_id]" type="text" value="{$row.shop_id|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Numbers')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-numbers" disabled data-rule="required" class="form-control" name="row[numbers]" type="text" value="{$row.numbers|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Transaction')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-transaction" disabled data-rule="required" class="form-control" name="row[transaction]" type="text" value="{$row.transaction|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">订单名称:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-body" disabled data-rule="required" class="form-control" name="row[body]" type="text" value="{$row.body|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">用户留言:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-message" disabled data-rule="required" class="form-control" name="row[message]" type="text" value="{$row.message|htmlentities}">
        </div>
    </div>
    {if $row['pay_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">付款时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-pay_time" disabled data-rule="required" class="form-control" name="row[pay_time]" type="text"  value="{:date('Y-m-d H:i:s',$row.pay_time)}">
        </div>
    </div>
    {/if}
    {if $row['delivery_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">发货时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-delivery_time" disabled data-rule="required" class="form-control" name="row[delivery_time]" type="text" value="{:date('Y-m-d H:i:s',$row.delivery_time)}">
        </div>
    </div>
    {/if}
    {if $row['receiving_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">收货时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-receiving_time" disabled data-rule="required" class="form-control" name="row[receiving_time]" type="text" value="{:date('Y-m-d H:i:s',$row.receiving_time)}">
        </div>
    </div>
    {/if}
    {if $row['refund_apply_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">申请退款时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-refund_apply_time" disabled data-rule="required" class="form-control" name="row[refund_apply_time]" type="text" value="{:date('Y-m-d H:i:s',$row.refund_apply_time)}">
        </div>
    </div>
    {/if}
    {if $row['refund_apply_msg']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">退款申请:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-refund_apply_msg" disabled data-rule="required" class="form-control" name="row[refund_apply_msg]" type="text" value="{$row.refund_apply_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['refund_agree_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">同意退款时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-refund_agree_time" disabled data-rule="required" class="form-control" name="row[refund_agree_time]" type="text" value="{:date('Y-m-d H:i:s',$row.refund_agree_time)}">
        </div>
    </div>
    {/if}
    {if $row['refund_refuse_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">拒绝退款时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-refund_refuse_time" disabled data-rule="required" class="form-control" name="row[refund_refuse_time]" type="text" value="{:date('Y-m-d H:i:s',$row.refund_refuse_time)}">
        </div>
    </div>
    {/if}
    {if $row['refund_refuse_msg']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">拒绝原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-refund_refuse_msg" disabled data-rule="required" class="form-control" name="row[refund_refuse_msg]" type="text" value="{$row.refund_refuse_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['back_time']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">退单时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-back_time" disabled data-rule="required" class="form-control" name="row[back_time]" type="text" value="{:date('Y-m-d H:i:s',$row.back_time)}">
        </div>
    </div>
    {/if}
    {if $row['back_msg']}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">退单原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-back_msg" disabled data-rule="required" class="form-control" name="row[back_msg]" type="text" value="{$row.back_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['status']==9}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">平台退单时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-platform_agree_time" disabled data-rule="required" class="form-control" name="row[platform_agree_time]" type="text" value="{:date('Y-m-d H:i:s',$row.platform_agree_time)}">
        </div>
    </div>
    {/if}
    {if $row['status']==8}
    <div class="form-group" id="c-platform_agree_msg_">
        <label class="control-label col-xs-12 col-sm-2">平台退单原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-platform_agree_msg" data-rule="required" class="form-control" name="row[platform_agree_msg]" type="text" value="{$row.platform_agree_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['status']==9}
    <div class="form-group" >
        <label class="control-label col-xs-12 col-sm-2">平台退单原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input data-rule="required" disabled class="form-control" name="row[platform_agree_msg]" type="text" value="{$row.platform_agree_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['status']==10}
    <div class="form-group" id="c-platform_refuse_time_">
        <label class="control-label col-xs-12 col-sm-2">平台拒绝时间:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-platform_refuse_time" disabled data-rule="required" class="form-control" name="row[platform_refuse_time]" type="text" value="{:date('Y-m-d H:i:s',$row.platform_refuse_time)}">
        </div>
    </div>
    {/if}
    {if $row['status']==8}
    <div class="form-group" id="c-platform_refuse_msg_">
        <label class="control-label col-xs-12 col-sm-2">平台拒绝原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-platform_refuse_msg" data-rule="required" class="form-control" name="row[platform_refuse_msg]" type="text" value="{$row.platform_refuse_msg|htmlentities}">
        </div>
    </div>
    {/if}
    {if $row['status']==10}
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">平台拒绝原因:</label>
        <div class="col-xs-12 col-sm-8">
            <input data-rule="required" disabled class="form-control" name="row[platform_refuse_msg]" type="text" value="{$row.platform_refuse_msg|htmlentities}">
        </div>
    </div>
    {/if}
    <!-- order_address 表-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Orderaddress.contact')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-orderaddress-contact" disabled data-rule="required" class="form-control" name="row[orderaddress][contact]" type="text" value="{$row.orderaddress.contact|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Orderaddress.phone')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-orderaddress-phone" disabled data-rule="required" class="form-control" name="row[orderaddress][phone]" type="text" value="{$row.orderaddress.phone|htmlentities}">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Orderaddress.address')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-orderaddress-address" disabled data-rule="required" class="form-control" name="row[orderaddress][address]" type="text" value="{$row.orderaddress.address|htmlentities}">
        </div>
    </div>
    <!-- order_good 表-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">商品详情:</label>
        <div class="col-xs-12 col-sm-8">
            <table id="table" class="table table-striped table-bordered table-hover table-nowrap">
                <thead>
                <tr>
                    <th data-field="ordergood.ordergoodgood.name">商品名</th>
                    <th data-field="ordergood.ordergoodgood.thumb_image">图片</th>
                    <th data-field="ordergood.original">原价</th>
                    <th data-field="ordergood.price">售价</th>
                    <th data-field="ordergood.counts">数量</th>
                    <th data-field="ordergood.count">小计</th>
                </tr>
                </thead>
                {php}$all = 0;{/php}
                {volist name="$row['ordergood']" id="vo"}
                <tr>
                    <td>{$vo['ordergoodgood']['name']}</td>
                    <td><img src="{$config['upload']['cdnurl']}{$vo['ordergoodgood']['thumb_image']}" alt="" style="max-width: 300px;"></td>
                    <td>{$vo['original']}</td>
                    <td>{$vo['price']}</td>
                    <td>{$vo['counts']}</td>
                    <td >{$vo['counts']*$vo['price']}</td>
                    {php}$all += $vo['counts']*$vo['price'];{/php}
                </tr>
                {/volist}
                <tr><td colspan="7" class="text-danger">总计：{$all}元</td></tr>
            </table>
        </div>
    </div>
    <!-- order 表-->
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Status')}:</label>
        <div class="col-xs-12 col-sm-8">

            <div class="radio">
            {foreach name="statusList" item="vo"}
            <label for="row[status]-{$key}"><input id="row[status]-{$key}" name="row[status]" {if $key<9&&$row['status']==8}disabled{/if} type="radio" value="{$key}" {in name="key" value="$row.status"}checked{/in} /> {$vo}</label>
            {/foreach}
            </div>

        </div>
    </div>
    {if $row['status']==8 && session('admin.shop_id')==0}
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-success btn-embossed disabled">{:__('OK')}</button>
            <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
        </div>
    </div>
    {/if}
</form>